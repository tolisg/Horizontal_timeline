!function(e,t,n,a){var l="horizontal_timeline",s="plugin_"+l,r=function(e,t){this.element=e;var i=t?t:90;this.initTimeline(this.element,i)};r.prototype={initTimeline:function(t,i){var n=i,a=this;t.each(function(){var t=e(this),i={};i.timelineWrapper=t.find(".events-wrapper"),i.eventsWrapper=i.timelineWrapper.children(".events"),i.fillingLine=i.eventsWrapper.children(".filling-line"),i.timelineEvents=i.eventsWrapper.find("a"),i.timelineDates=a.parseDate(i.timelineEvents),i.eventsMinLapse=a.minLapse(i.timelineDates),i.timelineNavigation=t.find(".cd-timeline-navigation"),i.eventsContent=t.children(".events-content"),a.setDatePosition(i,n);var l=a.setTimelineWidth(i,n);t.addClass("loaded"),i.timelineNavigation.on("click",".next",function(e){e.preventDefault(),a.updateSlide(i,l,"next",n)}),i.timelineNavigation.on("click",".prev",function(t){t.preventDefault(),e(this).hasClass("inactive")||a.updateSlide(i,l,"prev",n)}),i.eventsWrapper.on("click","a",function(t){t.preventDefault(),i.timelineEvents.removeClass("selected"),e(this).addClass("selected"),a.updateOlderEvents(e(this)),a.updateFilling(e(this),i.fillingLine,l)})})},updateSlide:function(e,t,i,n){var a=this,l=a.getTranslateValue(e.eventsWrapper),s=Number(e.timelineWrapper.css("width").replace("px",""));"next"==i?this.translateTimeline(e,l-s+n,s-t):this.translateTimeline(e,l+s-n)},updateTimelinePosition:function(e,i,n){var a=t.getComputedStyle(i.get(0),null),l=Number(a.getPropertyValue("left").replace("px","")),s=Number(n.timelineWrapper.css("width").replace("px","")),r=Number(n.eventsWrapper.css("width").replace("px","")),p=this,d=p.getTranslateValue(n.eventsWrapper);("next"==e&&l>s-d||"prev"==e&&-d>l)&&p.translateTimeline(n,-l+s/2,s-r)},translateTimeline:function(e,t,i){var n=e.eventsWrapper.get(0);t=t>0?0:t,t="undefined"!=typeof i&&i>t?i:t,this.setTransformValue(n,"translateX",t+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==i?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")},updateFilling:function(e,i,n){var a=t.getComputedStyle(e.get(0),null),l=a.getPropertyValue("left"),s=a.getPropertyValue("width"),l=Number(l.replace("px",""))+Number(s.replace("px",""))/2,r=l/n;this.setTransformValue(i.get(0),"scaleX",r)},setDatePosition:function(e,t){var n=[];n[0]=0;var a=0,l=this;for(i=0;i<e.timelineDates.length;i++){var s=l.daydiff(e.timelineDates[0],e.timelineDates[i]),r=Math.round(s/e.eventsMinLapse);n[i+1]=r;var p=n[i+1]-n[i];a+=p>4?5:0==p&&i>0?1:p,e.timelineEvents.eq(i).css("left",a*t+"px")}},setTimelineWidth:function(e,t){var i=this.daydiff(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1]),n=i/e.eventsMinLapse,n=Math.round(n)+4,a=n*t,l=this,s=e.timelineWrapper.width();if(0==e.timelineDates.length)return a;var r=parseInt(e.timelineEvents.eq(e.timelineDates.length-1).css("left").replace("px","")),p=parseInt(e.timelineEvents.eq(e.timelineDates.length-1).css("width").replace("px",""));return a=r+2*p,s>a?a=s:e.timelineNavigation.find(".next").removeClass("inactive"),0==e.eventsWrapper.find("a.selected").length&&e.eventsWrapper.find("a").first().addClass("selected"),e.eventsWrapper.css("width",a+"px"),l.updateFilling(e.eventsWrapper.find("a.selected"),e.fillingLine,a),l.updateTimelinePosition("next",e.eventsWrapper.find("a.selected"),e),a},updateOlderEvents:function(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")},getTranslateValue:function(e){var i=t.getComputedStyle(e.get(0),null),n=i.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var a=n[4]}else var a=0;return Number(a)},setTransformValue:function(e,t,i){e.style.transform=t+"("+i+")"},parseDate:function(t){var i=[];return t.each(function(){var t=e(this),n=t.data("date").split("T");if(n.length>1)var a=n[0].split("."),l=n[1].split(":");else if(n[0].indexOf(":")>=0)var a=["2000","0","0"],l=n[0].split(":");else var a=n[0].split("."),l=["0","0"];var s=new Date(a[2],a[1]-1,a[0],l[0],l[1]);i.push(s)}),i},daydiff:function(e,t){return Math.round(t-e)},minLapse:function(e){var t=[],n=this;for(i=1;i<e.length;i++){var a=n.daydiff(e[i-1],e[i]);t.push(a)}return Math.min.apply(null,t)},destroy:function(){this.element.removeData(),this.element.find(".cd-timeline-navigation").off("click",".next"),this.element.find(".cd-timeline-navigation").off("click",".prev"),this.element.find(".events-wrapper").children(".events").off("click","a"),this.element.removeClass("loaded")}},e.fn[l]=function(e){var t=this.data(s);return t instanceof r?"undefined"!=typeof e&&t.initTimeline(this,e):(t=new r(this,e),this.data(s,t)),t}}(jQuery,window,document);